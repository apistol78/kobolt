<?xml version="1.0" encoding="utf-8"?>
<object type="traktor.script.Script" version="2">
	<text>
	<![CDATA[
import(traktor)

AimControl = AimControl or class("AimControl", world.ScriptComponent)

function AimControl:update(contextObject, totalTime, deltaTime)
	local skeleton = self.owner:getComponent(animation.SkeletonComponent)
	local aimAngle = math.sin(totalTime)
	local headAngle = math.sin(totalTime * 1.3)

	skeleton:concatenatePoseTransform("Spine1",
		Transform(
			Vector4.zero,
			Quaternion.fromAxisAngle(Vector4(aimAngle / 2, 0, 0)) *
			Quaternion.fromAxisAngle(Vector4(0, 0, headAngle / 2 + math.pi / 10))
		),
		true
	) 
	
	skeleton:concatenatePoseTransform("Spine2",
		Transform(
			Vector4.zero,
			Quaternion.fromAxisAngle(Vector4(aimAngle / 2, 0, 0)) *
			Quaternion.fromAxisAngle(Vector4(0, 0, headAngle / 2 + math.pi / 10))
		),
		true
	) 

	skeleton:concatenatePoseTransform("Neck",
		Transform(
			Vector4.zero,
			Quaternion.fromAxisAngle(Vector4(-aimAngle / 6, 0, 0))
		),
		true
	) 
end

	]]>
	</text>
</object>
